<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <div>글번호 : <span id='bno'></span></div>
    <div>제목 : <span id='title'></span></div>
    <div>작성자 : <span id='nickname'></span></div>
    <div id="content"></div>
    <hr>
    <button onclick="goUpdate()">변경하기</button>
    <button onclick="doDelete()">삭제하기</button>

    <script>
        const bno = getBno();
        const board = getBoard();
        if(board===null) {
            location.href = 'index.html';
        }
        renderBoard();

        function getBno() {
            const search = location.search
            const indexOfEqual = search.indexOf("=");
            const bno = +search.substring(indexOfEqual+1);
            return +bno;
        }

        function getBoard() {
            const boards = JSON.parse(localStorage.getItem('boards'));
            for(const board of boards) {
                if(board.bno===bno) {
                    return board;
                }
            }
            return null;
        }

        function render() {
            document.getElementById('bno').innerHTML = board.bno;
            document.getElementById('title').innerHTML = board.title;
            document.getElementById('nickname').innerHTML = board.nickname;
            document.getElementById('content').innerHTML = board.content;
        }

        function goUpdate() {
            location.href = `update.html?bno=${bno}`;
        }

        function doDelete() {
            const boards = JSON.parse(localStorage.getItem('boards'))
            for(let i=0;i<boards.length; i++) {
                if(boards[i].bno==bno) {
                    boards.splice(i,1);
                    localStorage.setItem('boards', JSON.stringify(boards))
                    location.href = "index.html";
                    return;
                }
            }
            alert("삭제하지 못했습니다")
        }
    </script>
</body>
</html>