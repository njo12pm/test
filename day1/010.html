<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <title>Document</title>
</head>
<body>
    <ul class="pagination" id="pagination">
    </ul>
    <script>
        let pageno = +(location.search.substring(8))
        pageno = pageno===0? 1 : pageno;

        function renderPagination(pageno, pagesize, totalcount, blockSize=5) {
            const numberOfPages = Math.ceil(totalcount/pagesize);
            const prev = Math.floor((pageno-1)/blockSize)*blockSize;
            const start = prev + 1;
            let end = prev + blockSize;
            let next = end +1;
            if(end>=numberOfPages) {
                end = numberOfPages;
                next = 0;
            }
        }

        let html = ``;
        if(prev>0) {
            html += `<li class='page-item'><a href='010.html?pageno=${prev}'>이전으로</a></li>`
        }

        for(let i=start; i<=end; i++) {
            html += `
            <li class='${i===pageno?"page-item active":"page-item"}'>
                <a class='page-link' href='010.html?pageno=${i}>${i}</a>
            </li>`
        }

        if(next>0) {
            html += `<li class='page-item'><a href='010.html?pageno=${next}'>다음으로</a></li>`
        }

        axios.get(`https://sample.bmaster.kro.kr/contacts?pageno=${pageno}&pagesize=10`)
        .then(function(res) {
            const {pageno, pagesize, totalcount, contacts} = res.data;
            renderPagination(pageno, pagesize, totalcount);
        })
    </script>
</body>
</html>